<div class="calendar-wrap">
  <div class="logout">
    <button nz-button nzType="default" (click)="logout()">退出登录</button>
  </div>
  <div class="department_info">
    <div class="name">
      <span> {{ name }}</span>
    </div>
    <div class="address">
      <span> {{ addr }} </span>
    </div>
  </div>
  <div class="month-picker">
    <nz-month-picker
      nzPlaceHolder="请选择日期"
      [(ngModel)]="selectedMonth"
      (ngModelChange)="onMonthChange($event)"
    ></nz-month-picker>
  </div>
  <div class="table">
    <div class="table-header">
      <button nz-button nzType="default" (click)="onExport()">导出</button>
      <span>{{ selectedMonth }}垃圾收运量表</span>
    </div>
    <nz-spin [nzSize]="'large'" [nzSpinning]="isSpinning">
      <nz-table #basicTable [nzData]="dataSet" [nzShowPagination]="false">
        <thead>
          <tr>
            <th>时间</th>
            <th>收运量(桶)</th>
            <th>收运车辆</th>
            <th>收运人员</th>
          </tr>
        </thead>
        <tbody>
          <ng-template ngFor let-data let-i="index" [ngForOf]="dataSet">
            <tr>
              <td>{{ data.date }}</td>
              <td>{{ data.totalQuantity }}</td>
              <!-- <td>{{ data.plateNumber }}</td>
            <td>{{ data.driver }}</td> -->
            </tr>
            <ng-template
              *ngIf="data.detailList && data.detailList.length > 0"
              ngFor
              let-child
              [ngForOf]="data.detailList"
            >
              <tr>
                <td></td>
                <td></td>
                <td class="amount-of-garbage">
                  {{ child.plateNumber }}
                </td>
                <td class="amount-of-garbage">
                  {{ child.driver }}
                </td>
              </tr>
            </ng-template>
          </ng-template>
        </tbody>
      </nz-table>
    </nz-spin>
  </div>
  <div class="tabs">
    <button
      nz-button
      nzType="default"
      (click)="onCalendar()"
      [ngClass]="selectedCal ? 'selected' : 'unselected'"
    >
      日历
    </button>
    <button
      nz-button
      nzType="default"
      (click)="onTable()"
      [ngClass]="selectedCal ? 'unselected' : 'selected'"
    >
      表格
    </button>
  </div>
</div>
